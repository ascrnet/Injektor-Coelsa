; Casete Azul Coelsa Labo B
; ********* Basic ************
; Versión file por AsCrNet
; 2021-04-14 para Atariware
;------------------------------

PORTB = $D301
NMIEN = $D40E


	org $7000
	
INICIO
	JSR COPYROMTORAM
	
; Copia bytes del $CC00 al $CFFF
	LDY #0
COPY1  
	MVA .ADR(prgCC_01),Y $CC00,Y+
    CPY #.LEN prgCC_01
    BNE COPY1
	LDY #0
COPY2  
	MVA .ADR(prgCC_02),Y $CD00,Y+
    CPY #.LEN prgCC_02
    BNE COPY2
	LDY #0
COPY3  
	MVA .ADR(prgCC_03),Y $CE00,Y+
    CPY #.LEN prgCC_03
    BNE COPY3
	LDY #0
COPY4  
	MVA .ADR(prgCC_04),Y $CF00,Y+
    CPY #.LEN prgCC_04
    BNE COPY4

	
; Copia bytes del $C310 al $C56F
	LDY #0
COPY5  
	MVA .ADR(prgCC_05),Y $C310,Y+
    CPY #.LEN prgCC_05
    BNE COPY5
	LDY #0
COPY6 
	MVA .ADR(prgCC_06),Y $C410,Y+
    CPY #.LEN prgCC_06
    BNE COPY6
	LDY #0
COPY7 
	MVA .ADR(prgCC_07),Y $C510,Y+
    CPY #95   
    BNE COPY7

; Ir al menú
    JMP $CC00
	
; Rutina de copia de ROM a RAM
; Para poder modificar el O.S.
COPYROMTORAM	
    SEI
	LDA NMIEN
	PHA
	LDA #$00
	STA NMIEN
	TAY
KLOOP
	LDA $C000,Y
	DEC PORTB
	STA $C000,Y
	INC PORTB
	INY
	BNE KLOOP
	INC KLOOP+2
	INC KLOOP+8
KMOVE
	LDA KLOOP+2   
	BEQ @KEXIT
	CMP #$D0
	BNE KLOOP
	LDA #$D8
	STA KLOOP+2
	STA KLOOP+8
	BNE KLOOP
@KEXIT
	PLA
	STA NMIEN
	CLI
	DEC PORTB
	RTS	
	
; Byte de $CC00-$CFFF (4 Partes) 
; Reemplaza el set de caracteres internacional por el programa Injektor Basic
prgCC_01
	.byte $A2,$FF,$8E,$FC,$02,$D0,$2E,$48,$41,$52,$44,$57,$41,$52,$45,$20
	.byte $26,$20,$53,$4F,$46,$54,$57,$41,$52,$45,$70,$6F,$72,$3A,$20,$50
	.byte $45,$44,$52,$4F,$20,$43,$41,$52,$41,$42,$41,$4C,$4C,$28,$63,$29
	.byte $20,$31,$39,$38,$39,$A9,$94,$8F,$C6,$02,$A9,$3C,$8F,$02,$D3,$A9
	.byte $B7,$8F,$AF,$CE,$A9,$CE,$8F,$B0,$CE,$A9,$A6,$8F,$30,$02,$A9,$CE
	.byte $8F,$31,$02,$20,$2F,$CF,$C9,$32,$F0,$7A,$C9,$31,$D0,$F5,$20,$B5
	.byte $CF,$48,$AD,$01,$D3,$48,$A2,$5E,$BD,$76,$CC,$9D,$00,$04,$CA,$E0
	.byte $FF,$D0,$F5,$4C,$00,$04,$8E,$01,$D3,$A0,$40,$B9,$3C,$ED,$99,$FF
	.byte $44,$88,$D0,$F7,$84,$04,$84,$06,$A9,$CC,$85,$05,$A9,$40,$8E,$01
	.byte $D3,$85,$07,$A2,$03,$B1,$04,$91,$06,$A9,$00,$91,$04,$C8,$D0,$F5
	.byte $E6,$05,$E6,$07,$CA,$10,$EE,$A5,$07,$30,$0A,$A2,$FE,$A9,$40,$85
	.byte $05,$A9,$CC,$D0,$D9,$A2,$40,$BD,$FF,$44,$9D,$3C,$ED,$98,$9D,$FF
	.byte $44,$CA,$D0,$F3,$8E,$44,$02,$68,$8D,$01,$D3,$68,$30,$03,$6C,$FA
	.byte $BF,$4C,$30,$C3,$A2,$FF,$A9,$DF,$8F,$AF,$CE,$A9,$CE,$8F,$B0,$CE
	.byte $20,$2F,$CF,$A9,$FF,$A2,$07,$8F,$AF,$CE,$A2,$CF,$8F,$B0,$CE,$A2
	.byte $80,$8F,$89,$02,$20,$40,$FD,$A2,$09,$BD,$77,$CD,$9D,$00,$03,$CA
prgCC_02
	.byte $10,$F7,$20,$46,$CF,$A2,$FF,$A9,$D9,$8F,$41,$FD,$8F,$A3,$EB,$8F
	.byte $04,$D2,$E8,$8F,$46,$FD,$8F,$A8,$EB,$8F,$06,$D2,$8F,$26,$EC,$20
	.byte $68,$E4,$AF,$14,$00,$CA,$E4,$14,$D0,$FC,$38,$EB,$C3,$C5,$14,$D0
	.byte $FC,$20,$52,$CF,$BD,$81,$CD,$9D,$04,$03,$CA,$10,$F7,$20,$46,$CF
	.byte $BD,$87,$CD,$9D,$04,$03,$CA,$10,$F7,$20,$46,$CF,$BD,$8D,$CD,$9D
	.byte $04,$03,$CA,$10,$F7,$20,$46,$CF,$A2,$FF,$A9,$08,$8F,$26,$EC,$A9
	.byte $CC,$8F,$41,$FD,$8F,$A3,$EB,$A9,$05,$8F,$46,$FD,$8F,$A8,$EB,$A9
	.byte $3C,$8F,$02,$D3,$4C,$5E,$CC,$60,$00,$57,$80,$93,$CD,$1F,$00,$83
	.byte $00,$16,$CE,$1F,$00,$83,$00,$00,$CC,$1F,$00,$00,$04,$13,$C3,$1F
	.byte $00,$5C,$02,$55,$55,$FA,$00,$01,$6C,$03,$FF,$03,$78,$CB,$9B,$BD
	.byte $81,$03,$38,$EB,$81,$9D,$81,$03,$CA,$D0,$F4,$8F,$8F,$55,$4B,$0D
	.byte $82,$54,$21,$41,$0D,$13,$84,$0D,$19,$84,$2E,$81,$85,$60,$83,$53
	.byte $10,$81,$21,$80,$83,$53,$80,$13,$83,$6F,$18,$84,$51,$6D,$49,$71
	.byte $89,$41,$4E,$51,$60,$21,$59,$51,$5C,$60,$83,$53,$6C,$2D,$10,$63
	.byte $6C,$CF,$8F,$55,$0F,$D3,$7F,$4C,$71,$3E,$52,$84,$1E,$BD,$6E,$4B
	.byte $51,$78,$69,$07,$95,$38,$95,$51,$7D,$A1,$0E,$7E,$10,$87,$53,$10
prgCC_03
	.byte $B2,$81,$10,$90,$53,$99,$6C,$A8,$2B,$10,$85,$53,$30,$B3,$83,$10
	.byte $90,$53,$99,$E1,$00,$01,$A2,$FF,$9A,$20,$13,$04,$A9,$FF,$8D,$01
	.byte $D3,$4E,$01,$D3,$4E,$02,$D3,$4C,$00,$50,$A9,$00,$48,$8F,$04,$03
	.byte $A9,$00,$AB,$FF,$A9,$CC,$48,$A0,$04,$20,$48,$04,$A9,$81,$8F,$48
	.byte $FE,$A9,$13,$8F,$04,$03,$A9,$5C,$AB,$FF,$A9,$C3,$A0,$02,$20,$48
	.byte $04,$68,$AA,$68,$18,$EB,$00,$A8,$8A,$EB,$00,$48,$98,$48,$60,$48
	.byte $8A,$A2,$FF,$8F,$08,$03,$68,$8F,$05,$03,$98,$8F,$09,$03,$8A,$4B
	.byte $40,$8F,$03,$03,$20,$59,$E4,$10,$0C,$68,$8D,$04,$03,$68,$AA,$68
	.byte $8D,$08,$03,$68,$A8,$AB,$00,$CA,$60,$66,$1C,$06,$3E,$66,$3E,$00
	.byte $3C,$66,$00,$66,$66,$66,$3E,$00,$3C,$66,$00,$38,$18,$18,$3C,$00
	.byte $0C,$18,$3C,$66,$7E,$60,$70,$70,$70,$70,$70,$70,$70,$70,$46,$B7
	.byte $CE,$70,$70,$06,$41,$A6,$CE,$00,$11,$0D,$00,$63,$6F,$72,$72,$65
	.byte $72,$00,$62,$61,$73,$69,$63,$00,$00,$00,$00,$00,$12,$0D,$00,$67
	.byte $72,$61,$62,$61,$72,$00,$70,$72,$6F,$67,$72,$61,$6D,$61,$00,$00
	.byte $00,$00,$00,$B0,$A1,$B2,$A1,$00,$00,$A7,$B2,$A1,$A2,$A1,$B2,$00
	.byte $00,$00,$00,$00,$00,$30,$32,$25,$33,$29,$2F,$2E,$25,$00,$00,$32
prgCC_04
	.byte $25,$34,$35,$32,$2E,$00,$00,$75,$6E,$00,$6D,$6F,$6D,$65,$6E,$74
	.byte $6F,$00,$70,$6F,$72,$00,$66,$61,$76,$6F,$72,$00,$00,$00,$00,$00
	.byte $00,$A7,$B2,$A1,$A2,$A1,$AE,$A4,$AF,$00,$00,$00,$00,$00,$00,$A9
	.byte $FF,$8D,$FC,$02,$AD,$25,$E4,$48,$AD,$24,$E4,$48,$60,$AD,$01,$E4
	.byte $48,$AD,$00,$E4,$48,$60,$AF,$7A,$CD,$8F,$03,$03,$8F,$0B,$03,$20
	.byte $59,$E4,$18,$AF,$14,$00,$EB,$F6,$C5,$14,$D0,$FC,$A2,$05,$60,$A9
	.byte $08,$8D,$1F,$D0,$A9,$FF,$A2,$70,$9D,$40,$03,$A9,$0C,$9D,$42,$03
	.byte $20,$56,$E4,$A9,$FE,$8D,$01,$D3,$AE,$1F,$D0,$E0,$02,$D0,$06,$20
	.byte $A7,$CF,$A9,$FF,$60,$AC,$13,$D0,$8C,$FA,$03,$D0,$0E,$8C,$F8,$03
	.byte $A2,$A0,$86,$6A,$8E,$E4,$02,$8E,$E6,$02,$0A,$8D,$01,$D3,$20,$B2
	.byte $CF,$20,$A7,$CF,$A9,$00,$60,$20,$8E,$EF,$A9,$7D,$20,$B0,$F2,$4C
	.byte $39,$E7,$6C,$FE,$BF,$A6,$62,$A0,$01,$9C,$8F,$FE,$9C,$93,$FE,$A0
	.byte $00,$9C,$8D,$FE,$9C,$91,$FE,$A2,$FF,$A9,$12,$8F,$E2,$EB,$A2,$02
	.byte $BD,$F7,$CF,$9D,$77,$FD,$BD,$FA,$CF,$9D,$27,$FD,$BD,$FD,$CF,$9D
	.byte $87,$FC,$CA,$10,$EB,$A9,$02,$8F,$09,$00,$A9,$10,$8F,$02,$00,$A9
	.byte $C3,$8F,$03,$00,$4C,$5F,$CF,$4C,$6C,$C3,$4C,$EE,$C3,$20,$A9,$C4

; Byte del $C310-$C56F (3 Partes)
; Parcha el SIO para agragar soporte INJEKTOR en el BASIC
prgCC_05
	.byte $8D,$01,$D3,$D8,$A2,$FF,$9A,$CA,$8A,$AC,$13,$D0,$D0,$06,$AC,$F8
	.byte $03,$D0,$07,$0A,$8D,$01,$D3,$6C,$FA,$BF,$8D,$01,$D3,$6C,$0C,$00
	.byte $A9,$80,$85,$3E,$8D,$EA,$03,$A9,$4E,$8D,$3F,$C6,$A9,$C3,$8D,$41
	.byte $C6,$20,$7D,$E4,$20,$BB,$C5,$A9,$02,$85,$09,$6C,$0C,$00,$45,$52
	.byte $52,$4F,$52,$20,$45,$4E,$20,$4C,$41,$20,$43,$41,$52,$47,$41,$2C
	.byte $20,$52,$45,$43,$4F,$4D,$49,$45,$4E,$5A,$45,$9B,$A9,$FF,$48,$A2
	.byte $08,$8F,$26,$EC,$20,$68,$E4,$2C,$91,$C4,$10,$24,$68,$A2,$FD,$8F
	.byte $52,$FE,$A2,$83,$8F,$48,$FE,$A2,$3C,$8F,$0A,$EC,$A0,$7F,$A2,$04
	.byte $A9,$03,$8D,$2A,$02,$20,$5C,$E4,$AD,$2A,$02,$D0,$FB,$A0,$01,$60
	.byte $68,$AA,$8F,$52,$FE,$A9,$81,$8F,$48,$FE,$A9,$34,$8F,$0A,$EC,$A0
	.byte $E0,$A2,$01,$20,$90,$C3,$38,$AF,$14,$00,$EB,$C3,$A8,$E4,$14,$F0
	.byte $FC,$AF,$32,$02,$49,$80,$AA,$8F,$32,$02,$8F,$0F,$D2,$AF,$14,$00
	.byte $C4,$14,$D0,$E9,$AF,$32,$02,$2B,$7F,$8F,$32,$02,$8F,$0F,$D2,$A2
	.byte $00,$8F,$26,$EC,$20,$68,$E4,$A0,$F0,$A2,$00,$4C,$90,$C3,$AF,$14
	.byte $00,$49,$80,$A8,$AF,$0F,$D2,$29,$10,$F0,$F3,$C4,$14,$D0,$F5,$8D
	.byte $16,$03,$A0,$58,$A2,$02,$A9,$03,$8D,$2A,$02,$20,$5C,$E4,$AF,$2A
prgCC_06			
	.byte $02,$F0,$57,$AF,$0F,$D2,$29,$10,$CD,$16,$03,$F0,$F1,$8D,$16,$03
	.byte $A9,$C8,$85,$31,$AC,$0B,$D4,$A2,$00,$CC,$0B,$D4,$F0,$FB,$AD,$2A
	.byte $02,$F0,$37,$E8,$AC,$0B,$D4,$AD,$0F,$D2,$29,$10,$CD,$16,$03,$F0
	.byte $E8,$8D,$16,$03,$E0,$65,$90,$C6,$E0,$90,$B0,$C2,$E6,$31,$D0,$D7
	.byte $A0,$F0,$A2,$00,$20,$90,$C3,$A9,$FF,$AA,$8F,$52,$FE,$A2,$81,$8F
	.byte $48,$FE,$A9,$34,$A0,$92,$A2,$C4,$D0,$12,$A2,$FF,$A9,$FD,$8F,$52
	.byte $FE,$A9,$83,$8F,$48,$FE,$A9,$3C,$A0,$3D,$A2,$ED,$48,$8A,$A2,$FF
	.byte $8F,$00,$EC,$68,$8F,$0A,$EC,$98,$8F,$FF,$EB,$8F,$0A,$D2,$A0,$01
	.byte $60,$FF,$8F,$06,$D2,$8F,$31,$00,$8F,$0F,$D2,$18,$EB,$27,$AA,$8F
	.byte $04,$D2,$AF,$32,$02,$8F,$0F,$D2,$60,$8C,$01,$D3,$A2,$FF,$A9,$02
	.byte $8F,$09,$00,$A9,$10,$8F,$02,$00,$A9,$C3,$8F,$03,$00,$2C,$DC,$02
	.byte $30,$01,$60,$78,$A2,$00,$8F,$DC,$02,$2C,$91,$C4,$30,$12,$CA,$8E
	.byte $91,$C4,$A9,$5B,$48,$A9,$C5,$48,$A9,$0F,$A0,$CC,$A2,$05,$D0,$0D
	.byte $8E,$91,$C4,$A9,$4D,$48,$A9,$C5,$48,$A9,$02,$A0,$D9,$48,$8A,$A2
	.byte $FF,$8F,$46,$FD,$8F,$A8,$EB,$98,$8F,$41,$FD,$8F,$A3,$EB,$68,$A6
	.byte $62,$9D,$15,$EE,$68,$8D,$3B,$C5,$68,$8D,$3A,$C5,$A5,$14,$C5,$14
prgCC_07				
	.byte $F0,$FC,$A9,$FF,$A2,$0A,$8F,$18,$D0,$A2,$2D,$8F,$02,$D4,$A2,$C5
	.byte $8F,$03,$D4,$38,$A5,$14,$EB,$CD,$C5,$14,$D0,$FC,$60,$70,$70,$70
	.byte $70,$70,$70,$47,$3F,$C5,$70,$70,$70,$46,$4D,$C5,$41,$2D,$C5,$00
	.byte $00,$00,$00,$00,$00,$A9,$AE,$AA,$A5,$AB,$B4,$AF,$B2,$00,$00,$00
	.byte $00,$00,$00,$A1,$A3,$B4,$A9,$B6,$A1,$A4,$AF,$00,$00,$00,$00,$00
	.byte $00,$A9,$AE,$A1,$A3,$B4,$A9,$B6,$AF,$00,$00,$00,$00,$00,$00
		
	RUN INICIO
